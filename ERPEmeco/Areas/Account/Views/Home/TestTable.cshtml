<!-- ✅ روابط Bootstrap + DataTables -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
<link href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.bootstrap5.min.css" rel="stylesheet">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"></script>

<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5>البيانات الوظيفية</h5>
        <div class="d-flex gap-2">
            <button id="btnAdd" class="btn btn-primary btn-sm">➕ إضافة سجل جديد</button>
            <button id="btnDelete" class="btn btn-danger btn-sm">🗑️ حذف الصف المحدد</button>
        </div>
    </div>

    <table id="example" class="table table-striped table-bordered align-middle" style="width:100%">
        <thead class="table-light text-center">
            <tr>
                <th><input type="checkbox" id="selectAll"></th>
                <th>الاسم</th>
                <th>البريد الإلكتروني</th>
                <th>تاريخ التعيين</th>
                <th>الراتب</th>
                <th>الحالة</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="text-center"><input type="checkbox" class="row-select"></td>
                <td>محمد علي</td>
                <td>m.ali@example.com</td>
                <td>2021-04-15</td>
                <td>$24,973.48</td>
                <td><span class="badge bg-success">احترافي</span></td>
            </tr>
            <tr>
                <td class="text-center"><input type="checkbox" class="row-select"></td>
                <td>أحمد حسن</td>
                <td>ahassan@company.com</td>
                <td>2021-01-26</td>
                <td>$23,704.82</td>
                <td><span class="badge bg-warning text-dark">مستقيل</span></td>
            </tr>
            <tr>
                <td class="text-center"><input type="checkbox" class="row-select"></td>
                <td>سارة محمود</td>
                <td>s.mahmoud@site.com</td>
                <td>2021-04-09</td>
                <td>$15,211.60</td>
                <td><span class="badge bg-success">احترافي</span></td>
            </tr>
            <tr>
                <td class="text-center"><input type="checkbox" class="row-select"></td>
                <td>محمود السيد</td>
                <td>msayed@corp.com</td>
                <td>2021-02-06</td>
                <td>$17,607.66</td>
                <td><span class="badge bg-danger">مرفوض</span></td>
            </tr>
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function() {
      // تهيئة DataTable
      var table = $('#example').DataTable({
        dom: '<"d-flex justify-content-between align-items-center mb-2"Bf>rtip',
        buttons: [
          {
            extend: 'excel',
            text: '📊 Excel',
            className: 'btn btn-success btn-sm'
          },
          {
            extend: 'csv',
            text: '📁 CSV',
            className: 'btn btn-info btn-sm'
          },
          {
            extend: 'pdf',
            text: '📄 PDF',
            className: 'btn btn-danger btn-sm'
          },
          {
            extend: 'print',
            text: '🖨️ طباعة',
            className: 'btn btn-secondary btn-sm'
          }
        ],
        language: {
          search: "بحث:",
          lengthMenu: "عرض _MENU_ صف",
          info: "عرض _START_ إلى _END_ من أصل _TOTAL_ صف",
          infoEmpty: "لا توجد بيانات متاحة",
          infoFiltered: "(تمت التصفية من إجمالي _MAX_ صف)",
          zeroRecords: "لا توجد نتائج مطابقة",
          paginate: {
            previous: "السابق",
            next: "التالي"
          }
        }
      });

      // ✅ تحديد الكل
      $('#selectAll').on('click', function() {
        $('.row-select').prop('checked', this.checked);
      });

      // ✅ زر الإضافة
      $('#btnAdd').click(function() {
        alert("سيتم فتح نموذج إضافة سجل جديد 👇");
        // هنا تقدر تفتح مودال أو فورم جديد
      });

      // ✅ زر الحذف
      $('#btnDelete').click(function() {
        const selected = $('.row-select:checked');
        if (selected.length === 0) {
          alert("من فضلك اختر صف واحد على الأقل للحذف.");
          return;
        }

        if (confirm("هل أنت متأكد أنك تريد حذف الصفوف المحددة؟")) {
          selected.each(function() {
            table.row($(this).closest('tr')).remove().draw();
          });
        }
      });
    });
</script>
